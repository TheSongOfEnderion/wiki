<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eternal Writer</title>

  <!-- CSS -->
  <link href="./.eternal/css/style.css" rel="stylesheet">

  <!-- JS -->
  <script src="./.eternal/js/bootstrap.bundle.min.js" type="text/javascript"></script>
  <script src="./.eternal/js/easymde.min.js" type="text/javascript"></script>
  <script src="./.eternal/js/notifications.min.js" type="text/javascript"></script>
  <script src="./.eternal/js/jsoneditor.js" type="text/javascript"></script>
  <script src="./.eternal/js/main.js" type="text/javascript"></script>



  <!-- Head Bar -->
  <div id="head-card"></div>
</head>

<div id="loading-screen">
  <div class='loading-div'>
    <div class='loading-block'>
      <div class='loading-item'></div>
      <div class='loading-item'></div>
      <div class='loading-item'></div>
      <div class='loading-item'></div>
      <div class='loading-item'></div>
      <div class='loading-item'></div>
      <div class='loading-item'></div>
      <div class='loading-item'></div>
    </div>
  </div>
</div>

<body class="hide">
  <button id="modalbtn" onclick="createEditor()">open modal</button>
  <div id="page-editor"> </div>

  <div class="container body-card">
    <div id="spoiler-button"></div>

    <div id="page-title">
      <h1></h1>
      <div id="page-breadcrumbs"></div>
    </div>

    <div id="page-content"><a href="?p=story-a">Test go</a></div>

    <div id="page-tags"></div>
  </div>

  <script>
    // Add Site Head
    getAsset('headbar.html')
      .then(data => {
        document.getElementById('head-card').innerHTML = data

        getAsset('eternal.json') // Website Title
          .then(data => {
            document.getElementById('project-title').innerText = data['projectTitle']
          })

        // Add Horizontal Navigation Bar
        getAsset('navbar.html')
          .then(data => {
            document.getElementById('nav-card').innerHTML = data
          })
      })

    // Gets Directory
    getAsset('directory.json')
      .then(async(data) => {
        directory = data;
      })
      .then(() => {
        // Gets Input Url
        if (window.location.search != "") {
          toggleScrollbarVisibility();
          renderPage();
        } else {

        }
      })
      .then(() => {
        document.getElementsByTagName('body')[0].classList.remove('hide');
        toggleScrollbarVisibility();
        document.getElementById('loading-screen').classList.add('hide');
      })

    function createEditor() {
      openModal('editor-modal')
    }
  </script>

  <script>
    function myNewFunction(sel) {
      let selected = sel.value;
      console.log(selected);
    }
  </script>

  <script>
  </script>

</body>

</html>